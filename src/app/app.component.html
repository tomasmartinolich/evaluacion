<div class="field is-grouped">
  <p class="control">
    <button class="button is-light" (click)="nuevoPaciente()">Nueva Paciente</button>
  </p>
  <p class="control">
    <button class="button is-light" (click)="guardar()">Guardar datos</button>
  </p>

  <div class="control">

    <div class="dropdown">
      <div class="dropdown-trigger">
        <button class="button is-light" aria-haspopup="true" aria-controls="dropdown-menu">
          <span>Cargar paciente</span>
          <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
        </button>
      </div>
      <div class="dropdown-menu" id="dropdown-menu" role="menu">
        <div class="dropdown-content">
          <div *ngFor="let paciente of pacientes">
            <a class="navbar-item" (click)="cargarPaciente(paciente)">
              {{paciente.nombre}}
            </a>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>


<div class="columns">

  <div class="block">
    <div class="column is-12 is-offset-one-fifth">
      <h1 class="title is-1">Evaluación nutricional de la embarazada</h1>
    </div>
  </div>
  
</div>

<div class="columns">

  <div class="column is-one-fifth is-offset-one-fifth">

    <div class="block">
      <span>Paciente</span>
      <input class="input is-primary" type="string" [(ngModel)]="paciente.nombre">
    </div>

    <div class="block">
      <span>Ingresar talla (metros)</span>
      <input class="input is-primary" type="number" [(ngModel)]="paciente.inputTalla" (change)="paciente.IMC = 0">
    </div>

    <button class="button is-success" (click)="calcularIMC()" [disabled]="paciente.IMC !== 0">Calcular IMC</button>
    <br/>

    <h2 class="title" *ngIf="paciente.IMC > 0">IMC = <b>{{ paciente.IMC.toFixed(2) }}</b></h2>
    
  </div>

  <div class="column is-one-fifth">

    <div class="block">
      <span>DNI</span>
      <input class="input is-primary" type="number" [(ngModel)]="paciente.DNI">
    </div>

    <div class="block">
      <span>Ingresar peso (kilogramos)</span>
      <input class="input is-primary" type="number" [(ngModel)]="paciente.inputPeso" (change)="paciente.IMC = 0">
    </div>

    <button class="button is-success" (click)="agregar()" [disabled]="paciente.IMC <= 0" tooltip="hola">
      <div class="tooltip">Agregar al gráfico
        <span class="tooltiptext" style="width: 220px;" *ngIf="paciente.IMC <=0">Es necesario calcular el IMC</span>
      </div>
    </button>

  </div>

  <div class="column is-one-fifth">
  
    <div class="block">
      <span>Ingresar fecha de última menstruación</span>
      <input class="input is-primary" type="date" [(ngModel)]="paciente.FUM" (change)="diferenciaSemanas(paciente.FUM)">
    </div>

    <h3 *ngIf="semanaEmbarazo > 0">Semana de embarazo: {{ semanaEmbarazo }}</h3>
    
  
  </div>

</div>

<div class="columns is-gapless">

  <div class="column is-1">
    <h3 class="title" style="margin-top:200px;">IMC</h3>
  </div>

  <div class="column is-10">

    <button class="button is-info" (click)="graphVisible = 'block'" *ngIf="graphVisible === 'none'">Ver gráfico</button>
    <button class="button is-danger" (click)="graphVisible = 'none'" *ngIf="graphVisible === 'block'">Ocultar gráfico</button>
    
    <div style="width: 800px; height: 400px;" [style.display]="graphVisible">
      <canvas id="myChart"></canvas>
    </div>

    <div>
      <h3 class="title" style="margin-left:200px;">Semana de embarazo</h3>
    </div>

    

  </div>

</div>